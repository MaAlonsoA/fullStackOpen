{"ast":null,"code":"var _jsxFileName = \"D:\\\\Dev\\\\FullStackOpen\\\\part3\\\\phonedir\\\\src\\\\components\\\\App.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { getAllPersons } from \"../services/persons/getAllPersons\";\nimport { postNewPerson } from \"../services/persons/postNewPerson\";\nimport { deletePersonById } from \"../services/persons/deletePersonById\";\nimport { putPersonById } from \"../services/persons/putPersonById\";\nimport { Persons } from \"./Persons\";\nimport { Filter } from \"./Filter\";\nimport { Form } from \"./Form\";\nimport { Notification } from \"./Notification\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const App = () => {\n  _s();\n\n  const [persons, setPersons] = useState([]);\n  const [newEntry, setNewEntry] = useState();\n  const [search, setSearch] = useState(\"\");\n  const [errorMessage, setErrorMessage] = useState({\n    type: \"\",\n    message: \"\"\n  });\n  useEffect(() => {\n    getAllPersons().then(persons => {\n      setPersons(persons);\n    }).catch(e => {\n      messageHandler(\"error\", e.message, 3000);\n    });\n  }, []);\n\n  const messageHandler = function (type, message) {\n    let time = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 3000;\n    setErrorMessage({\n      type,\n      message\n    });\n    setTimeout(() => {\n      setErrorMessage({\n        type: \"\",\n        message: \"\"\n      });\n    }, time);\n  };\n\n  const handleChange = event => {\n    setNewEntry({ ...newEntry,\n      [event.target.name]: event.target.value\n    });\n  };\n\n  const handleSubmit = event => {\n    event.preventDefault();\n\n    if (!newEntry || !newEntry.name || !newEntry.number) {\n      return window.alert(\"Enter values\");\n    }\n\n    if (persons.some(elem => {\n      return elem.name === newEntry.name;\n    })) {\n      const finded = persons.find(elem => {\n        return elem.name === newEntry.name;\n      });\n\n      if (window.confirm(`${newEntry.name} already exist, replace the old number with a new one`)) {\n        return putPersonById(finded.id, newEntry).then(() => {\n          getAllPersons().then(response => {\n            messageHandler(\"success\", `${finded.name} was successfully updated `, 5000);\n            setPersons(response);\n          }).catch(e => {\n            messageHandler(\"error\", e.message);\n          });\n        }).catch(e => {\n          messageHandler(\"error\", `${finded.name} was already deleted `);\n        });\n      }\n\n      return;\n    }\n\n    postNewPerson(newEntry).then(response => {\n      setPersons(persons.concat(response));\n      setNewEntry();\n    });\n    event.target.reset();\n    setNewEntry();\n  };\n\n  const handleSearch = event => {\n    setSearch(event.target.value);\n  };\n\n  const handleDelete = (id, name) => {\n    if (window.confirm(`Delete ${name}`)) {\n      deletePersonById(id).then(() => {\n        getAllPersons().then(persons => {\n          setPersons(persons);\n          messageHandler(\"success\", `${name} was successfully deleted `, 5000);\n        }).catch(e => {\n          messageHandler(\"error\", e.message);\n        });\n      }).catch(e => {\n        messageHandler(\"error\", e.message, 3000);\n      });\n    }\n  };\n\n  const personsToShow = search ? persons.filter(person => person.name.toLowerCase().includes(search.toLowerCase())) : persons;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [!errorMessage.type ? null : /*#__PURE__*/_jsxDEV(Notification, {\n      type: errorMessage.type,\n      message: errorMessage.message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Phonebook\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(Filter, {\n      handleSearch: handleSearch\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Add new \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(Form, {\n      handleSubmit: handleSubmit,\n      handleChange: handleChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Numbers\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(Persons, {\n      personsToShow: personsToShow,\n      handleDelete: handleDelete\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 133,\n    columnNumber: 3\n  }, this);\n};\n\n_s(App, \"SmCt1vrvbyG3+clQhvG0zpmUB5M=\");\n\n_c = App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["D:/Dev/FullStackOpen/part3/phonedir/src/components/App.jsx"],"names":["React","useState","useEffect","getAllPersons","postNewPerson","deletePersonById","putPersonById","Persons","Filter","Form","Notification","App","persons","setPersons","newEntry","setNewEntry","search","setSearch","errorMessage","setErrorMessage","type","message","then","catch","e","messageHandler","time","setTimeout","handleChange","event","target","name","value","handleSubmit","preventDefault","number","window","alert","some","elem","finded","find","confirm","id","response","concat","reset","handleSearch","handleDelete","personsToShow","filter","person","toLowerCase","includes"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AAEA,SAASC,aAAT,QAA8B,mCAA9B;AACA,SAASC,aAAT,QAA8B,mCAA9B;AACA,SAASC,gBAAT,QAAiC,sCAAjC;AACA,SAASC,aAAT,QAA8B,mCAA9B;AAEA,SAASC,OAAT,QAAwB,WAAxB;AACA,SAASC,MAAT,QAAuB,UAAvB;AACA,SAASC,IAAT,QAAqB,QAArB;AACA,SAASC,YAAT,QAA6B,gBAA7B;;AAEA,OAAO,MAAMC,GAAG,GAAG,MAAM;AAAA;;AACxB,QAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBZ,QAAQ,CAAC,EAAD,CAAtC;AACA,QAAM,CAACa,QAAD,EAAWC,WAAX,IAA0Bd,QAAQ,EAAxC;AACA,QAAM,CAACe,MAAD,EAASC,SAAT,IAAsBhB,QAAQ,CAAC,EAAD,CAApC;AACA,QAAM,CAACiB,YAAD,EAAeC,eAAf,IAAkClB,QAAQ,CAAC;AAAEmB,IAAAA,IAAI,EAAE,EAAR;AAAYC,IAAAA,OAAO,EAAE;AAArB,GAAD,CAAhD;AAEAnB,EAAAA,SAAS,CAAC,MAAM;AACfC,IAAAA,aAAa,GACXmB,IADF,CACQV,OAAD,IAAa;AAClBC,MAAAA,UAAU,CAACD,OAAD,CAAV;AACA,KAHF,EAIEW,KAJF,CAISC,CAAD,IAAO;AACbC,MAAAA,cAAc,CAAC,OAAD,EAAUD,CAAC,CAACH,OAAZ,EAAqB,IAArB,CAAd;AACA,KANF;AAOA,GARQ,EAQN,EARM,CAAT;;AAUA,QAAMI,cAAc,GAAG,UAACL,IAAD,EAAOC,OAAP,EAAgC;AAAA,QAAhBK,IAAgB,uEAAT,IAAS;AACtDP,IAAAA,eAAe,CAAC;AACfC,MAAAA,IADe;AAEfC,MAAAA;AAFe,KAAD,CAAf;AAIAM,IAAAA,UAAU,CAAC,MAAM;AAChBR,MAAAA,eAAe,CAAC;AACfC,QAAAA,IAAI,EAAE,EADS;AAEfC,QAAAA,OAAO,EAAE;AAFM,OAAD,CAAf;AAIA,KALS,EAKPK,IALO,CAAV;AAMA,GAXD;;AAaA,QAAME,YAAY,GAAIC,KAAD,IAAW;AAC/Bd,IAAAA,WAAW,CAAC,EACX,GAAGD,QADQ;AAEX,OAACe,KAAK,CAACC,MAAN,CAAaC,IAAd,GAAqBF,KAAK,CAACC,MAAN,CAAaE;AAFvB,KAAD,CAAX;AAIA,GALD;;AAOA,QAAMC,YAAY,GAAIJ,KAAD,IAAW;AAC/BA,IAAAA,KAAK,CAACK,cAAN;;AAEA,QAAI,CAACpB,QAAD,IAAa,CAACA,QAAQ,CAACiB,IAAvB,IAA+B,CAACjB,QAAQ,CAACqB,MAA7C,EAAqD;AACpD,aAAOC,MAAM,CAACC,KAAP,CAAa,cAAb,CAAP;AACA;;AAED,QACCzB,OAAO,CAAC0B,IAAR,CAAcC,IAAD,IAAU;AACtB,aAAOA,IAAI,CAACR,IAAL,KAAcjB,QAAQ,CAACiB,IAA9B;AACA,KAFD,CADD,EAIE;AACD,YAAMS,MAAM,GAAG5B,OAAO,CAAC6B,IAAR,CAAcF,IAAD,IAAU;AACrC,eAAOA,IAAI,CAACR,IAAL,KAAcjB,QAAQ,CAACiB,IAA9B;AACA,OAFc,CAAf;;AAGA,UACCK,MAAM,CAACM,OAAP,CACE,GAAE5B,QAAQ,CAACiB,IAAK,uDADlB,CADD,EAIE;AACD,eAAOzB,aAAa,CAACkC,MAAM,CAACG,EAAR,EAAY7B,QAAZ,CAAb,CACLQ,IADK,CACA,MAAM;AACXnB,UAAAA,aAAa,GACXmB,IADF,CACQsB,QAAD,IAAc;AACnBnB,YAAAA,cAAc,CACb,SADa,EAEZ,GAAEe,MAAM,CAACT,IAAK,4BAFF,EAGb,IAHa,CAAd;AAKAlB,YAAAA,UAAU,CAAC+B,QAAD,CAAV;AACA,WARF,EASErB,KATF,CASSC,CAAD,IAAO;AACbC,YAAAA,cAAc,CAAC,OAAD,EAAUD,CAAC,CAACH,OAAZ,CAAd;AACA,WAXF;AAYA,SAdK,EAeLE,KAfK,CAeEC,CAAD,IAAO;AACbC,UAAAA,cAAc,CAAC,OAAD,EAAW,GAAEe,MAAM,CAACT,IAAK,uBAAzB,CAAd;AACA,SAjBK,CAAP;AAkBA;;AACD;AACA;;AAED3B,IAAAA,aAAa,CAACU,QAAD,CAAb,CAAwBQ,IAAxB,CAA8BsB,QAAD,IAAc;AAC1C/B,MAAAA,UAAU,CAACD,OAAO,CAACiC,MAAR,CAAeD,QAAf,CAAD,CAAV;AACA7B,MAAAA,WAAW;AACX,KAHD;AAIAc,IAAAA,KAAK,CAACC,MAAN,CAAagB,KAAb;AACA/B,IAAAA,WAAW;AACX,GAhDD;;AAkDA,QAAMgC,YAAY,GAAIlB,KAAD,IAAW;AAC/BZ,IAAAA,SAAS,CAACY,KAAK,CAACC,MAAN,CAAaE,KAAd,CAAT;AACA,GAFD;;AAIA,QAAMgB,YAAY,GAAG,CAACL,EAAD,EAAKZ,IAAL,KAAc;AAClC,QAAIK,MAAM,CAACM,OAAP,CAAgB,UAASX,IAAK,EAA9B,CAAJ,EAAsC;AACrC1B,MAAAA,gBAAgB,CAACsC,EAAD,CAAhB,CACErB,IADF,CACO,MAAM;AACXnB,QAAAA,aAAa,GACXmB,IADF,CACQV,OAAD,IAAa;AAClBC,UAAAA,UAAU,CAACD,OAAD,CAAV;AACAa,UAAAA,cAAc,CACb,SADa,EAEZ,GAAEM,IAAK,4BAFK,EAGb,IAHa,CAAd;AAKA,SARF,EASER,KATF,CASSC,CAAD,IAAO;AACbC,UAAAA,cAAc,CAAC,OAAD,EAAUD,CAAC,CAACH,OAAZ,CAAd;AACA,SAXF;AAYA,OAdF,EAeEE,KAfF,CAeSC,CAAD,IAAO;AACbC,QAAAA,cAAc,CAAC,OAAD,EAAUD,CAAC,CAACH,OAAZ,EAAqB,IAArB,CAAd;AACA,OAjBF;AAkBA;AACD,GArBD;;AAuBA,QAAM4B,aAAa,GAAGjC,MAAM,GACzBJ,OAAO,CAACsC,MAAR,CAAgBC,MAAD,IACfA,MAAM,CAACpB,IAAP,CAAYqB,WAAZ,GAA0BC,QAA1B,CAAmCrC,MAAM,CAACoC,WAAP,EAAnC,CADA,CADyB,GAIzBxC,OAJH;AAMA,sBACC;AAAA,eACE,CAACM,YAAY,CAACE,IAAd,GAAqB,IAArB,gBACA,QAAC,YAAD;AAAc,MAAA,IAAI,EAAEF,YAAY,CAACE,IAAjC;AAAuC,MAAA,OAAO,EAAEF,YAAY,CAACG;AAA7D;AAAA;AAAA;AAAA;AAAA,YAFF,eAIC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAJD,eAKC,QAAC,MAAD;AAAQ,MAAA,YAAY,EAAE0B;AAAtB;AAAA;AAAA;AAAA;AAAA,YALD,eAMC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAND,eAOC,QAAC,IAAD;AAAM,MAAA,YAAY,EAAEd,YAApB;AAAkC,MAAA,YAAY,EAAEL;AAAhD;AAAA;AAAA;AAAA;AAAA,YAPD,eAQC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YARD,eASC,QAAC,OAAD;AAAS,MAAA,aAAa,EAAEqB,aAAxB;AAAuC,MAAA,YAAY,EAAED;AAArD;AAAA;AAAA;AAAA;AAAA,YATD;AAAA;AAAA;AAAA;AAAA;AAAA,UADD;AAaA,CApIM;;GAAMrC,G;;KAAAA,G","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\n\r\nimport { getAllPersons } from \"../services/persons/getAllPersons\";\r\nimport { postNewPerson } from \"../services/persons/postNewPerson\";\r\nimport { deletePersonById } from \"../services/persons/deletePersonById\";\r\nimport { putPersonById } from \"../services/persons/putPersonById\";\r\n\r\nimport { Persons } from \"./Persons\";\r\nimport { Filter } from \"./Filter\";\r\nimport { Form } from \"./Form\";\r\nimport { Notification } from \"./Notification\";\r\n\r\nexport const App = () => {\r\n\tconst [persons, setPersons] = useState([]);\r\n\tconst [newEntry, setNewEntry] = useState();\r\n\tconst [search, setSearch] = useState(\"\");\r\n\tconst [errorMessage, setErrorMessage] = useState({ type: \"\", message: \"\" });\r\n\r\n\tuseEffect(() => {\r\n\t\tgetAllPersons()\r\n\t\t\t.then((persons) => {\r\n\t\t\t\tsetPersons(persons);\r\n\t\t\t})\r\n\t\t\t.catch((e) => {\r\n\t\t\t\tmessageHandler(\"error\", e.message, 3000);\r\n\t\t\t});\r\n\t}, []);\r\n\r\n\tconst messageHandler = (type, message, time = 3000) => {\r\n\t\tsetErrorMessage({\r\n\t\t\ttype,\r\n\t\t\tmessage,\r\n\t\t});\r\n\t\tsetTimeout(() => {\r\n\t\t\tsetErrorMessage({\r\n\t\t\t\ttype: \"\",\r\n\t\t\t\tmessage: \"\",\r\n\t\t\t});\r\n\t\t}, time);\r\n\t};\r\n\r\n\tconst handleChange = (event) => {\r\n\t\tsetNewEntry({\r\n\t\t\t...newEntry,\r\n\t\t\t[event.target.name]: event.target.value,\r\n\t\t});\r\n\t};\r\n\r\n\tconst handleSubmit = (event) => {\r\n\t\tevent.preventDefault();\r\n\r\n\t\tif (!newEntry || !newEntry.name || !newEntry.number) {\r\n\t\t\treturn window.alert(\"Enter values\");\r\n\t\t}\r\n\r\n\t\tif (\r\n\t\t\tpersons.some((elem) => {\r\n\t\t\t\treturn elem.name === newEntry.name;\r\n\t\t\t})\r\n\t\t) {\r\n\t\t\tconst finded = persons.find((elem) => {\r\n\t\t\t\treturn elem.name === newEntry.name;\r\n\t\t\t});\r\n\t\t\tif (\r\n\t\t\t\twindow.confirm(\r\n\t\t\t\t\t`${newEntry.name} already exist, replace the old number with a new one`\r\n\t\t\t\t)\r\n\t\t\t) {\r\n\t\t\t\treturn putPersonById(finded.id, newEntry)\r\n\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\tgetAllPersons()\r\n\t\t\t\t\t\t\t.then((response) => {\r\n\t\t\t\t\t\t\t\tmessageHandler(\r\n\t\t\t\t\t\t\t\t\t\"success\",\r\n\t\t\t\t\t\t\t\t\t`${finded.name} was successfully updated `,\r\n\t\t\t\t\t\t\t\t\t5000\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\tsetPersons(response);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.catch((e) => {\r\n\t\t\t\t\t\t\t\tmessageHandler(\"error\", e.message);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch((e) => {\r\n\t\t\t\t\t\tmessageHandler(\"error\", `${finded.name} was already deleted `);\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tpostNewPerson(newEntry).then((response) => {\r\n\t\t\tsetPersons(persons.concat(response));\r\n\t\t\tsetNewEntry();\r\n\t\t});\r\n\t\tevent.target.reset();\r\n\t\tsetNewEntry();\r\n\t};\r\n\r\n\tconst handleSearch = (event) => {\r\n\t\tsetSearch(event.target.value);\r\n\t};\r\n\r\n\tconst handleDelete = (id, name) => {\r\n\t\tif (window.confirm(`Delete ${name}`)) {\r\n\t\t\tdeletePersonById(id)\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tgetAllPersons()\r\n\t\t\t\t\t\t.then((persons) => {\r\n\t\t\t\t\t\t\tsetPersons(persons);\r\n\t\t\t\t\t\t\tmessageHandler(\r\n\t\t\t\t\t\t\t\t\"success\",\r\n\t\t\t\t\t\t\t\t`${name} was successfully deleted `,\r\n\t\t\t\t\t\t\t\t5000\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch((e) => {\r\n\t\t\t\t\t\t\tmessageHandler(\"error\", e.message);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t\t\t.catch((e) => {\r\n\t\t\t\t\tmessageHandler(\"error\", e.message, 3000);\r\n\t\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tconst personsToShow = search\r\n\t\t? persons.filter((person) =>\r\n\t\t\t\tperson.name.toLowerCase().includes(search.toLowerCase())\r\n\t\t  )\r\n\t\t: persons;\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t{!errorMessage.type ? null : (\r\n\t\t\t\t<Notification type={errorMessage.type} message={errorMessage.message} />\r\n\t\t\t)}\r\n\t\t\t<h2>Phonebook</h2>\r\n\t\t\t<Filter handleSearch={handleSearch} />\r\n\t\t\t<h2>Add new </h2>\r\n\t\t\t<Form handleSubmit={handleSubmit} handleChange={handleChange} />\r\n\t\t\t<h2>Numbers</h2>\r\n\t\t\t<Persons personsToShow={personsToShow} handleDelete={handleDelete} />\r\n\t\t</div>\r\n\t);\r\n};\r\n"]},"metadata":{},"sourceType":"module"}